<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChargeWalk Agritech | Recommend Crop</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/recommend.css') }}">
</head>
<body>

    <div class="app-container">
        <aside class="sidebar">
            <div class="brand"><h2>KisanCore</h2></div>
            <div class="user-profile">
                <div class="avatar">üë§</div>
                <h3 id="sidebar-user-name">Farmer</h3>
                <p>Farm Manager</p>
            </div>
            <nav class="sidebar-nav">
                <a href="/dashboard" class="nav-item">üìä Dashboard</a>
                <a href="/yield" class="nav-item">üå± Predict Yield</a>
                <a href="/price" class="nav-item">üìà Price Forecasting</a>
                <a href="/recommend" class="nav-item active">üí° Crop Recommendation</a>
            </nav>
        </aside>

        <main class="main-content">
            <header class="top-header">
                <div>
                    <h1>AI Crop Recommender</h1>
                    <p class="subtitle">Discover the most profitable crop for your exact land conditions.</p>
                </div>
            </header>

            <div id="input-view" class="form-card active-view">
                <form id="recommend-form">
                    <div class="form-grid">
                        <div class="input-group">
                            <label>State</label>
                            <select id="state-select" required><option value="">-- Select State --</option></select>
                        </div>
                        <div class="input-group">
                            <label>District</label>
                            <select id="district-select" required disabled><option value="">-- Select District --</option></select>
                        </div>
                        <div class="input-group">
                            <label>Season</label>
                            <select id="season-select" required>
                                <option value="">-- Select Season --</option>
                                <option value="Kharif">Kharif</option> <option value="Rabi">Rabi</option> <option value="Zaid">Zaid</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label>Soil Type</label>
                            <select id="soil-select" required>
                                <option value="">-- Select Soil --</option>
                                <option value="Alluvial">Alluvial</option> <option value="Black">Black</option>
                                <option value="Red">Red</option> <option value="Laterite">Laterite</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label>Area (Hectares)</label>
                            <input type="number" id="area-input" placeholder="e.g., 5" required step="0.1">
                        </div>
                        
                        <div class="input-group">
                            <label>Temperature (¬∞C)</label>
                            <div class="weather-flex">
                                <input type="number" id="temp-input" placeholder="e.g., 28" step="0.1" required>
                                <button type="button" id="fetch-weather-btn" class="secondary-btn">‚òÅÔ∏è Auto-Fetch</button>
                            </div>
                        </div>
                        <div class="input-group">
                            <label>Rainfall (mm)</label>
                            <input type="number" id="rain-input" placeholder="e.g., 120" step="0.1" required>
                        </div>
                    </div>
                    <button type="submit" class="primary-btn" id="recommend-btn">Discover Best Crop ‚Üí</button>
                </form>
            </div>

            <div id="results-view" class="results-container hidden-view">
                <button id="back-btn" class="secondary-btn mb-20">‚Üê Recalculate</button>

                <div class="strategy-card">
                    <div class="winner-badge">üèÜ Most Profitable Match</div>
                    <h2 id="rec-crop">Wheat üåæ</h2>
                    <p class="match-reason">Based on your district's average rainfall and current soil type, Wheat offers the highest margin.</p>
                    
                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-icon">‚öñÔ∏è</div>
                            <p>Expected Yield</p>
                            <h3 id="rec-yield">0</h3>
                        </div>
                        <div class="stat-box">
                            <div class="stat-icon">üìà</div>
                            <p>Est. Market Price</p>
                            <h3 id="rec-price">0</h3>
                        </div>
                        <div class="stat-box highlight">
                            <div class="stat-icon">üí∞</div>
                            <p>Est. Total Revenue</p>
                            <h3 id="rec-revenue">0</h3>
                        </div>
                    </div>
                </div>
            </div>

        </main>
    </div>

    <script src="{{ url_for('static', filename='js/recommend.js') }}"></script>
</body>
</html>